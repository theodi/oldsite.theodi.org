<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Fig Data: 11 Tips on How to Handle Big Data in R (and 1 Bad Pun) | Open Data Institute</title>
<link href="../assets/application-693091b423df059e90189392fffb0ae0.css" media="all" rel="stylesheet" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="../assets/favicon-e0340b5bc5738e53c1b06680529c0963.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">

<!--[if lt IE 9]>
      <script src="../assets/html5shiv-5d1c7196accd7174ed22f320c693b063.js" type="text/javascript"></script>
    <![endif]-->

<!--[if (IE 7)|(IE 8)]>
      <script src="../assets/respond.min-5eec43180e3f6d282f038de07483dc4b.js" type="text/javascript"></script>
    <![endif]-->

<script src="../assets/modernizr.custom-1ecf37d7f9fbb3066a877e31ce79e79e.js" type="text/javascript"></script>

<!--[if lte IE 9]><link href="../assets/ie9-875f0d42a52ff5536404da8fda8d423b.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 8]><link href="../assets/ie8-4a6b9f309032dacb3913ccc2d55bda8b.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 7]><link href="../assets/ie7-d4066942f039a08eed8b62b80cde16cb.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lt IE 7]><link href="../assets/ie6-cab152e9612eeec9bd0af579a2231dd5.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->

<meta property="fb:pages" content="1755416561338416">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="../fig-data-11-tips-how-handle-big-data-r-and-1-bad-pun.json" rel="alternate" title="json" type="application/json">
<meta content="The Open Data Institute (ODI) equip, connect and inspire people around the world to innovate with data. Co-founded by Sir Tim Berners-Lee and Sir Nigel Shadbolt, the ODI provides events, training, membership and consultancy around open data." name="description">
<meta content="summary_large_image" name="twitter:card">
<meta content="@ODIHQ" name="twitter:site">
<meta content="article" property="og:type">
<meta content="../uploads/assets/c8/78/55c878641f986a082f000001/R1.jpg" property="og:image">
<meta content="Fig Data: 11 Tips on How to Handle Big Data in R (and 1 Bad Pun) | Open Data Institute" property="og:title">
<meta content="&lt;p&gt;What follows is a, technical, collection of tips. It assumes you are familiar with base R, how to install packages and how to do basic operations. Two interactive introductions to R are: DataMind and Code School.&lt;/p&gt;" property="og:description">
<meta content="Open Data Institute" property="og:site_name">
<meta content="../fig-data-11-tips-how-handle-big-data-r-and-1-bad-pun" property="og:url">
<meta name="govuk:rendering-application" content="Www">
<script type="text/javascript">


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-34573394-1', {});
















   ga('send', 'pageview');


</script></head>
<body>
<header class="site-header">
<div class="navbar navbar-inverse navbar-static-top">
<div class="container">
<div class="navbar-header">

<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="../"><img alt="The ODI" id="odi-logo" src="../assets/logo-header-dc4ead7a18ea4133873c79502c174638.png"></a>
</div>
<div class="modal fade" id="getLogo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="myModalLabel">Welcome to the ODI
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button>
</h4>
</div>
<div class="modal-body">
<p>Knowledge for everyone</p>
<p>The ODI helps to unlock the value of open data.</p>
<p>If you want to use our logo, different sizes and types are here: <a href="../brand">../brand</a></p>
<p><a rel="external" href="../uploads/assets/legacy/ODI%2Dlogo%2Dsml.png"><img src="../uploads/assets/legacy/ODI%2Dlogo%2Dsml.png" alt=""></a></p>
<p><a rel="external" href="../uploads/assets/legacy/ODI%2Dlogo%2Dmed.png"><img src="../uploads/assets/legacy/ODI%2Dlogo%2Dmed.png" alt=""></a></p>
<p><a rel="external" href="../uploads/assets/legacy/ODI%2Dlogo%2Dmed.png"><img src="../uploads/assets/legacy/ODI%2Dlogo%2Dlg.png" alt=""></a></p>
<p><a rel="external" href="../uploads/assets/legacy/ODI%2Dlogo%2Dmed.png"><img src="../uploads/assets/legacy/ODI%2Dlogo%2Dxlg.png" alt=""></a></p>
</div>
</div>
</div>
</div>
<ul class="nav navbar-nav navbar-right">
<li><a href="../contact">Contact us</a></li>
<li><a href="../newsletters">Newsletters</a></li>

</ul>

<form class="navbar-form navbar-right" method="get" action="//duckduckgo.com/">
<div class="form-group">
<div class="input-group">
<input value="oldsite.theodi.org" name="sites" type="hidden">
<input class="form-control" placeholder="Search ODI" name="q" type="text">
<input value="Go" class="btn" type="submit">
</div>
</div>
</form>
</div>
</div>
<div class="collapse navbar-collapse">
<div class="navbar navbar-static-top">
<div class="container">
<ul class="nav navbar-nav main-nav">
<li class="dropdown">
<a href="../news">
News &amp; blog
</a>
</li>
<li class="dropdown">
<a href="../get-involved">
Get involved
</a>
</li>
<li class="dropdown">
<a href="../our-network">
Our global network
</a>
</li>
<li class="dropdown">
<a href="../events">
Events
</a>
</li>
<li class="dropdown">
<a href="../our-focus">
Our focus
</a>
</li>
<li class="dropdown">
<a href="../publications">
Publications
</a>
</li>
<li class="dropdown last">
<a href="../about">
About the ODI
</a>
</li>
</ul>
</div>
</div>
</div>
<div class="navbar navbar-inverse navbar-static-top mobile-only">
<div class="container">
<ul class="nav navbar-nav navbar-right">
<li><a href="../contact">Contact us</a></li>
<li><a href="../newsletters">Newsletters</a></li>

</ul>

</div>
</div>
</header>
<div id="oldsite-banner" style="background-color: #ff6700; color: white; text-align: center; padding: 1rem; margin-bottom: 1rem; font-weight: 0.5;">
	<h2>WEBSITE RETIRED</h2>
	<p>This website has been retired and is available for reference and historical purposes only.</p>
	<p><a id="newSiteLink" href="#newSiteLink" style="color: white; text-decoration: underline;">Click here to navigate to the new website.</a></p>
	<p><i>Note: Some pages have not been migrated and you may end up back on this site as a result.</i></p>
	<script>
		(function() {
		var newURL = window.location.protocol + "//theodi.org" + "/" + window.location.pathname + window.location.search;
		document.getElementById("newSiteLink").setAttribute("href",newURL);
		})();
	</script>
</div> 
<div id="wrapper">
<header class="page-title">
<div class="container header-wrap">
<h1>Fig Data: 11 Tips on How to Handle Big Data in R (and 1 Bad Pun)</h1>
</div>
</header>
<div class="container">
<div class="row">
<div class="article-main">
<article class="article-body">
<p>In our latest project, <a href="http://smtm.labs.theodi.org"><em>Show me the Money</em></a>, we used close to 14 million rows to analyse regional activity of peer-to-peer lending in the UK. Conventional tools such as Excel fail (limited to 1,048,576 rows), which is sometimes taken as the definition of <em>Big Data</em>. Then again, I recently heard one of the leading experts, <a href="http://big-data-book.com/meet-the-authors">Ken Cukier</a>, say: "there is no definition of big data". </p>
<p><img src="../uploads/assets/c8/78/55c878641f986a082f000001/R1.jpg" alt="" class="img" id="55c87863f362be19bc000013">
<i><small>Image: Flickr (CC BY 2.0)-<a href="https://www.flickr.com/photos/nanpalmero/14187836848/">NaN Palmero</a></small></i></p>
<p><strong>What follows is a, technical, collection of tips. It assumes you are familiar with base R, how to install packages and how to do basic operations. Two interactive introductions to R are: <a href="http://www.datamind.org/">DataMind</a> and <a href="http://www.codeschool.com/courses/try-r">Code School</a>.</strong></p>
<p>In this particular case I managed to load the complete data into RAM for a standard analysis in <a href="http://www.r-project.org/">R</a>, i.e. no Hadoop or similar. Here are 11 tips when you deal with <strong>f</strong>&#8211;ing <strong>irritating</strong>, <strong>granular data</strong>. This blog post is about <em>Fig Data</em>: data that may not be "big" but the problems of size are <em>thinly veiled</em>. I won't cover parallel techniques in R, but you can find a starting point with <a href="http://r-pbd.org/">programming with big data in R</a> and a <a href="http://www.xmind.net/m/LKF2/">mind map</a>. Just because you can load your data into RAM does not guarantee you a smooth workflow. Computers are powerful, but it is easy to reach their limits. The <strong>scale factor</strong>, that is a rough estimates of the potential time you could save, is sometimes <em>up to 1,000</em> or even beyond. A factor of 60 means your code takes 1 minute to run instead of 1 hour.</p>
<h2 id="the11tips">The 11 tips</h2>
<ol>
<li><p><strong>Think in vectors.</strong> This means that for-loops ("do this for x times") are generally a bad idea in R. The <a href="http://www.burns-stat.com/pages/Tutor/R_inferno.pdf">R Inferno</a> has a chapter on why and how to "vectorise". Especially if you're a beginner or come from another programming language for-loops might be tempting. Resist and try to speak R. The <a href="http://nsaunders.wordpress.com/2010/08/20/a-brief-introduction-to-apply-in-r/">apply</a> family may be a good starting point, but of course do not avoid loops simply for the sake of avoiding loops.</p></li>
<li><p><strong>Use the fantastic <a href="http://datatable.r-forge.r-project.org/">data.table</a> package.</strong> Its advantage lies in speed and efficiency. Developed by <a href="http://stackoverflow.com/users/403310/matthew-dowle">Matthew Dowle</a> it introduces a way of handling data, similar to the data.frame class. In fact, it includes data.frame, but some of the syntax is different. Luckily, the <a href="http://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.pdf">documentation</a> (and the <a href="http://datatable.r-forge.r-project.org/datatable-faq.pdf">FAQ</a>) are excellent.</p></li>
<li><p><strong>Read csv-files with the <a href="http://www.inside-r.org/packages/cran/data.table/docs/fread">fread</a> function</strong> instead of read.csv (read.table). It is faster in readinga file in table format andgives you feedback on progress. However, it comes with a big warning sign <em>"not for production use yet"</em>. One trick it uses is to read the first, middle, and last 5 rows to determine column types. Side note: ALL functions that take longer than 5 seconds should have progress bars. Writing your own function? &#8211;&gt; <a href="http://stat.ethz.ch/R-manual/R-devel/library/utils/html/txtProgressBar.html">txtProgressBar</a>.</p></li>
<li><p><strong>Parse POSIX dates with the <em>very</em> fastpackage <a href="http://rforge.net/fasttime/">fasttime</a>.</strong> Let me say that again:very fast. (Though the dates have to be in a standard format.)</p></li>
<li><p><strong>Avoid copying data.frames</strong> and <strong>remove,</strong> <code>rm(yourdatacopy)</code>, some in your workflow. You'll figure this out anyway when you run out of space.</p></li>
<li><p><strong>Merge data.frames with the superior <a href="http://stackoverflow.com/questions/15673550/why-is-rbindlist-better-than-rbind">rbindlist</a></strong> &#8211; data.table we meet again. As the community knows: "<em>rbindlist</em> is an optimized version of <code>do.call(rbind, list(...))</code>, which is known for being slow when using rbind.data.frame."</p></li>
<li><p><strong>Regular expressions can be slow</strong>, too. On one occassion I found a simpler way and used the <a href="http://journal.r-project.org/archive/2010-2/RJournal_2010-2_Wickham.pdf">stringr</a> package instead; it was a lot faster. </p></li>
<li><p>No R tips collection would be complete with a hat tip to Hadley Wickham. Besides stringr, I point you to <strong><a href="https://github.com/hadley/bigvis">bigvis</a>, a package for visualising big data sets</strong>.</p></li>
<li><p><strong>Use a <em>random sample</em> for your exploratory analysis or to test code</strong>. Here is a code snippet that will give you a convenient <a href="https://gist.github.com/statshero/6122484">function</a>: <code>row.sample(yourdata, 1000)</code> will reduce your massive file to a random sample of 1,000 observations.</p></li>
<li><p>Related to the previous point is <strong>reading only a subset of the data you want to analyse</strong>. <code>read.csv()</code> for example has a <code>nrows</code> option, which only reads the first x number of lines. This is also a good idea of getting your header names. The preferred option, a random sample, is more difficult and probably needs a 'workaround' as described <a href="http://stackoverflow.com/questions/15532810/reading-40-gb-csv-file-into-r-using-bigmemory">here</a>.</p></li>
<li><p><strong>Export your data set directly as gzip.</strong> Writing a compressed csv file is not entirly trivial, but <a href="http://blog.revolutionanalytics.com/2009/12/r-tip-save-time-and-space-by-compressing-data-files.html">stackoverflow</a> has the answer. <a href="http://blog.revolutionanalytics.com/2009/12/r-tip-save-time-and-space-by-compressing-data-files.html">Revolution Analytics</a> also has some benchmark times for compressions in R.</p></li>
</ol>
<p><strong><a href="../team/ulrich-atz">Ulrich Atz</a> is a Startup Programme Manager at the ODI. Follow <a href="https://twitter.com/statshero">@Ulrich Atz</a> on Twitter.</strong></p>
<p><strong>If you have ideas or experience in open data that you&#8217;d like to share, <a href="../cdn-cgi/l/email-protection#6414160b001107100d0b0a24100c010b000d4a0b1603">pitch us a blog</a> or tweet us at <a href="https://twitter.com/odihq">@ODIHQ</a>.</strong></p>
<p><img src="../uploads/assets/c8/79/55c879a9f362be1b10000007/r2.jpg" alt="" class="img" id="55c879a91f986a07de000002"></p>
<p><i><small>Image: Flickr (CC BY 2.0)-<a href="https://www.flickr.com/photos/sidelong/8021460657/">David Bleasdale</a></small></i></p>
<p></p>
</article>
</div>
<aside class="article-sidebar listing">
<div class="module module-light module-colour-9">
<a href="../courses">
<h1 class="module-heading">Courses</h1>
</a>
</div>
<div class="module module-light module-colour-6">
<a href="../what-is-open-data">
<h1 class="module-heading">What is open data?</h1>
</a>
</div>
<div class="module module-light module-colour-4">
<a href="../who-owns-our-data-infrastructure">
<h1 class="module-heading">Who owns our data infrastructure?</h1>
</a>
</div>
</aside>
</div>
</div>
</div>
<footer class="site-footer">
<div class="container">
<div class="row">
<div class="col-md-8 footer-content">
<h1 class="footer-logo"><a href="http://oldsite.theodi.org">Open Data Institute</a></h1>
<p><a href="../contact">Open Data Institute, 65 Clifton Street, London EC2A 4JE</a></p>
<p><a href="../cdn-cgi/l/email-protection#630a0d050c23170b060c070a4d0c1104"><span class="__cf_email__" data-cfemail="3f565159507f4b575a505b5611504d58">[email&#160;protected]</span></a> Company <a href="http://opencorporates.com/companies/gb/08030289">08030289</a>
<span>VAT</span><span>143 7796 80</span>
</p>
<p class="license">
<a href="http://creativecommons.org/licenses/by-sa/2.0/uk/deed.en_GB" rel="license">
<img alt="Creative Commons Licence" height="15" src="../assets/cc-a23fe95f04508432c8d97c00b0a36254.png" width="80">
</a>
</p>
</div>
<div class="col-md-4 footer-nav">
<nav><ul class="pull-right list-inline">
<li><a href="http://www.twitter.com/ODIHQ" class=" ">
<img alt="Follow us on Twitter" src="../assets/twitter-a658ecc9fe2aab3308a5fb36adfb9a64.png" title="Follow us on Twitter"></a></li>
<li><a href="https://soundcloud.com/theodi" class=" ">
<img alt="Listen on Soundcloud" src="../assets/soundcloud-3932b3db23c6fb6c45bce20c8016462c.png" title="Listen on Soundcloud"></a></li>
<li><a href="http://www.scribd.com/OpenDataInstitute" class=" ">
<img alt="Read on Scribd" src="../assets/scribd-8afadecb87771fd6f6814e6ea81fb23d.png" title="Read on Scribd"></a></li>
<li><a href="https://github.com/orgs/theodi" class=" ">
<img alt="Follow us on Github" src="../assets/github-914931d2a14f54f3c64caec5c6e68017.png" title="Follow us on Github"></a></li>
<li><a href="http://vimeo.com/theodiuk" class=" ">
<img alt="Watch on Vimeo" src="../assets/vimeo-a865234771edd239032629b694ddaa32.png" title="Watch on Vimeo"></a></li>
<li><a href="http://www.youtube.com/user/OpenDataInstituteUK" class=" ">
<img alt="Watch on Youtube" src="../assets/youtube-cccfa6f837a0acfe0d2fd9492b0d45b3.png" title="Watch on Youtube"></a></li>
<li><a href="http://www.flickr.com/photos/ukodi/" class=" ">
<img alt="Follow us on Flickr" src="../assets/flickr-c81d78a530d046663cfff44293f6f775.png" title="Follow us on Flickr"></a></li>
</ul></nav>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<nav><ul class="pull-right list-inline">
<li class=" "><a href="../terms-of-use" class=" ">Terms of use</a></li>
<li class=" "><a href="../privacy-policy" class=" ">Privacy policy</a></li>
<li class=" "><a href="../cookie-policy" class=" ">Cookie policy</a></li>
</ul></nav>
</div>
</div>
</div>
</footer>
<script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>

  var _pt = ["E6AF1363-3E19-409A-983C-91FFE62C2CBB"];
  (function(d,t){
    var a=d.createElement(t),s=d.getElementsByTagName(t)[0];a.src=location.protocol+'//a1webstrategy.com/track.js';s.parentNode.insertBefore(a,s);
  }(document,'script'));

  </script>
<script type="text/javascript">
      (function (n) {
          var u = window.location.href;
          var p = u.split("/")[0];
          var t = n.createElement("script"), i;
          t.type = "text/javascript";
          t.async = !0;
          t.src = p + "//dashboard.whoisvisiting.com/who.js";
          i = n.getElementsByTagName("script")[0];
          i.parentNode.insertBefore(t, i)
      })(document);

          var whoparam = whoparam || [];
          whoparam.push(["AcNo", "8d5d04b9adc94a34bc385c6f3370594e"]);
          whoparam.push(["SendHit", ""]
      );
  </script>
<script src="../assets/application-4829863ea093de33ae55c9a127d6af6b.js" type="text/javascript"></script>

<!--[if gt IE 7]><!-->
<script src="../assets/bootstrap/bootstrap-collapse-c4cb45620c1346753e2385c125ed4bdd.js" type="text/javascript"></script>
<!--<![endif]-->


<!--[if gt IE 7]><!-->
<script src="../assets/masonry-c617ee0c7d6c602b548ab5e69d50f4fa.js" type="text/javascript"></script>
<script src="../assets/infinitescroll-243a7a50c0c843f1deb394ea98f4d0a6.js" type="text/javascript"></script>
<script src="../assets/background-check-677e6100d9ce594cd30a88f57fc49b48.js" type="text/javascript"></script>
<!--<![endif]-->
</body>
</html>
