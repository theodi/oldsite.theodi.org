<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Visualising Rail Disruption: Methodology | Open Data Institute</title>
<link href="assets/application-693091b423df059e90189392fffb0ae0.css" media="all" rel="stylesheet" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/favicon-e0340b5bc5738e53c1b06680529c0963.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">

<!--[if lt IE 9]>
      <script src="assets/html5shiv-5d1c7196accd7174ed22f320c693b063.js" type="text/javascript"></script>
    <![endif]-->

<!--[if (IE 7)|(IE 8)]>
      <script src="assets/respond.min-5eec43180e3f6d282f038de07483dc4b.js" type="text/javascript"></script>
    <![endif]-->

<script src="assets/modernizr.custom-1ecf37d7f9fbb3066a877e31ce79e79e.js" type="text/javascript"></script>

<!--[if lte IE 9]><link href="assets/ie9-875f0d42a52ff5536404da8fda8d423b.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 8]><link href="assets/ie8-4a6b9f309032dacb3913ccc2d55bda8b.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 7]><link href="assets/ie7-d4066942f039a08eed8b62b80cde16cb.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lt IE 7]><link href="assets/ie6-cab152e9612eeec9bd0af579a2231dd5.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->

<meta property="fb:pages" content="1755416561338416">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="summer-showcase-visualising-rail-disruption-methodology.json" rel="alternate" title="json" type="application/json">
<meta content="The Open Data Institute (ODI) equip, connect and inspire people around the world to innovate with data. Co-founded by Sir Tim Berners-Lee and Sir Nigel Shadbolt, the ODI provides events, training, membership and consultancy around open data." name="description">
<meta content="summary_large_image" name="twitter:card">
<meta content="@ODIHQ" name="twitter:site">
<meta content="article" property="og:type">
<meta content="uploads/assets/5e/d4/565ed44d1f986a7c86000005/rail_vis_1_copy_7.png" property="og:image">
<meta content="Visualising Rail Disruption: Methodology | Open Data Institute" property="og:title">
<meta content="&lt;p&gt;The Darwin Push Port, which is the primary source for train timetable information and real-time updates on when trains actually arrive and depart, is a real-time feed, with no historical data storage. &lt;/p&gt;" property="og:description">
<meta content="Open Data Institute" property="og:site_name">
<meta content="summer-showcase-visualising-rail-disruption-methodology" property="og:url">
<meta name="govuk:rendering-application" content="Www">
<script type="text/javascript">


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-34573394-1', {});
















   ga('send', 'pageview');


</script></head>
<body>
<header class="site-header">
<div class="navbar navbar-inverse navbar-static-top">
<div class="container">
<div class="navbar-header">

<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href=""><img alt="The ODI" id="odi-logo" src="assets/logo-header-dc4ead7a18ea4133873c79502c174638.png"></a>
</div>
<div class="modal fade" id="getLogo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="myModalLabel">Welcome to the ODI
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button>
</h4>
</div>
<div class="modal-body">
<p>Knowledge for everyone</p>
<p>The ODI helps to unlock the value of open data.</p>
<p>If you want to use our logo, different sizes and types are here: <a href="brand">brand</a></p>
<p><a rel="external" href="uploads/assets/legacy/ODI%2Dlogo%2Dsml.png"><img src="uploads/assets/legacy/ODI%2Dlogo%2Dsml.png" alt=""></a></p>
<p><a rel="external" href="uploads/assets/legacy/ODI%2Dlogo%2Dmed.png"><img src="uploads/assets/legacy/ODI%2Dlogo%2Dmed.png" alt=""></a></p>
<p><a rel="external" href="uploads/assets/legacy/ODI%2Dlogo%2Dmed.png"><img src="uploads/assets/legacy/ODI%2Dlogo%2Dlg.png" alt=""></a></p>
<p><a rel="external" href="uploads/assets/legacy/ODI%2Dlogo%2Dmed.png"><img src="uploads/assets/legacy/ODI%2Dlogo%2Dxlg.png" alt=""></a></p>
</div>
</div>
</div>
</div>
<ul class="nav navbar-nav navbar-right">
<li><a href="contact">Contact us</a></li>
<li><a href="newsletters">Newsletters</a></li>

</ul>

<form class="navbar-form navbar-right" method="get" action="//duckduckgo.com/">
<div class="form-group">
<div class="input-group">
<input value="oldsite.theodi.org" name="sites" type="hidden">
<input class="form-control" placeholder="Search ODI" name="q" type="text">
<input value="Go" class="btn" type="submit">
</div>
</div>
</form>
</div>
</div>
<div class="collapse navbar-collapse">
<div class="navbar navbar-static-top">
<div class="container">
<ul class="nav navbar-nav main-nav">
<li class="dropdown">
<a href="news">
News &amp; blog
</a>
</li>
<li class="dropdown">
<a href="get-involved">
Get involved
</a>
</li>
<li class="dropdown">
<a href="our-network">
Our global network
</a>
</li>
<li class="dropdown">
<a href="events">
Events
</a>
</li>
<li class="dropdown">
<a href="our-focus">
Our focus
</a>
</li>
<li class="dropdown">
<a href="publications">
Publications
</a>
</li>
<li class="dropdown last">
<a href="about">
About the ODI
</a>
</li>
</ul>
</div>
</div>
</div>
<div class="navbar navbar-inverse navbar-static-top mobile-only">
<div class="container">
<ul class="nav navbar-nav navbar-right">
<li><a href="contact">Contact us</a></li>
<li><a href="newsletters">Newsletters</a></li>

</ul>

</div>
</div>
</header>
<div id="oldsite-banner" style="background-color: #ff6700; color: white; text-align: center; padding: 1rem; margin-bottom: 1rem; font-weight: 0.5;">
	<h2>WEBSITE RETIRED</h2>
	<p>This website has been retired and is available for reference and historical purposes only.</p>
	<p><a id="newSiteLink" href="#newSiteLink" style="color: white; text-decoration: underline;">Click here to navigate to the new website.</a></p>
	<p><i>Note: Some pages have not been migrated and you may end up back on this site as a result.</i></p>
	<script>
		(function() {
		var newURL = window.location.protocol + "//theodi.org" + "/" + window.location.pathname + window.location.search;
		document.getElementById("newSiteLink").setAttribute("href",newURL);
		})();
	</script>
</div> 
<div id="wrapper">
<header class="page-title">
<div class="container header-wrap">
<h1>Visualising Rail Disruption: Methodology</h1>
</div>
</header>
<div class="container">
<div class="row">
<div class="article-full">
<article class="article-body">
<div class="row">
<div class="col-md-8">
<img src="uploads/assets/5e/d4/565ed44d1f986a7c86000005/rail_vis_1_copy_7.png" alt="Summer Showcase - Visualising rail disruption">
<p></p>
<p>The project produced a web application to allow commuters to explore rail service punctuality. In order to achieve this, a number of steps were carried out:</p>
<ol>
<li>The Darwin Push Port, which is the primary source for train timetable information and real-time updates on when trains actually arrive and depart, is a live feed, with no historical data storage. This made it necessary to build infrastructure to collect data in real-time and aggregate it to build up a historical data store.</li>
<li>Data from NaPTaN and the Darwin Reference data sets were combined (along with some manually researched data) to produce a single reference for stations, including the two different identifiers used by National Rail systems (TIPLOC and CRS), station names and their geographical coordinates.</li>
<li>A program was developed to aggregate the real-time data collected each day, to group together the same trains on each day they run, and generate the statistics over time to be presented in the web application.</li>
<li>Finally the web application, based around a map from OpenStreetMap, was built to present this collected data.</li>
</ol>
<h3>Analysing service punctuality: methodology</h3>
<p>Fasteroute, working with the ODI, first assembled a list of cities that were both regional centres and commuter hubs. The list of commuter cities and stations monitored in this analysis was created using the Office of Rail Regulation list of busiest rail stations in the UK, identifying destinations with large volumes of commuters. All arrivals at main stations in each city were counted: any difference with the scheduled arrival time was noted, and a mean average was calculated. Where multiple major main stations in a city are positioned on the same rail line, as is the case for Blackfriars and St Pancras on the City Thameslink line in London, any delay of a service visiting those stations was recorded at each, but to avoid counting the delay more than once, the average delay was used.</p>
<p>The aggregated data used to count the volume of trains arriving at each main train station (on time, under five minutes, 10 minutes, 15 minutes, and 30 minutes or cancelled) is presented in 30-minute increments: 07:01&#8211;07:30, 07:31&#8211;08:00, 08:01&#8211;08:30, 08:31&#8211;09:00, 09:01&#8211;09:30, 09:31&#8211;10:00.</p>
<p>The number of trains in each 30-minute period was counted and an average delay in minutes was calculated based on all delays of all services arrive in that timeframe.</p>
<h3>Working openly: see how Fasteroute arrived at these findings</h3>
<p>Due to the newness of the Darwin Push Port as a data feed, and the resulting limited availability of open source software to assist working with it, Fasteroute built a number of different tools as part of this project, all of which have been released as open source software under the Apache license. These components are as follows:</p>
<ul>
<li>
<a href="https://github.com/fasteroute/national-rail-stations">National Rail stations</a> This project consists of a JSON file containing details of all National Rail stations in the UK, including their CRS codes, TIPLOC codes, managing Train Operating Companies, names, latitudes and longitudes. This data has been created by combining that available from the Darwin Reference data set, NaPTaN and some manual research to fill in the final few gaps.</li>
<li>
<a href="https://github.com/fasteroute/darwin-gateway">Darwin Gateway</a> This Java program acts as a proxy to the Darwin Push Port, receiving messages from it in real-time as well as pulling in snapshot files where necessary to ensure all data is present, and translating the messages from XML to JSON for easier consumption in downstream applications.</li>
<li>
<a href="https://github.com/fasteroute/darwin-db">Darwin DB</a> This is a Python program which listens to the Darwin Push Port (proxied by darwin-gateway), and records all train schedules and the updates and forecasts they receive to a PostgreSQL database for persistent storage.</li>
<li>
<a href="https://github.com/fasteroute/delay-explorer-aggregator">Delay Explorer Aggregator</a> This is a Python program which generates the aggregate statistics for timetabled trains, routes and stations presented in the train-explorer web application based on the data recorded each day by darwin-db.</li>
<li>
<a href="https://github.com/fasteroute/delay-explorer-api">Delay Explorer API</a> This component provides a REST API for access to the data provided by the train-explorer-aggregator and national-rail-stations components. It is implemented partially in Python and partially in Go.</li>
<li>
<a href="https://github.com/fasteroute/delay-explorer-web">Delay Explorer, web version</a> The web application frontend that, in conjunction with train-explorer-api, provides the user interface of the project, allowing non-technical users to explore the data collected and understand the different delay performances of the trains they travel on. It is implemented in ReactJS making use of Leaflet (and OpenStreetMap) for the map component.</li>
</ul>
<div>
<a href="summer-showcase-visualising-rail-disruption-collaboration" title="Next page"><img class="pull-right" src="uploads/assets/16/43/56164300f362be08b400000f/summer_showcase_next_but.svg" alt=""></a>
<a href="summer-showcase-visualising-rail-disruption-about-the-data" title="Previous page"><img class="pull-left" src="uploads/assets/29/f4/5629f4fe1f986a081e000033/previous.svg" alt=""></a>
</div>
<p></p>
</div>
<div class="pull-left col-md-3">
<div class="blog-box">
<a class="story-link" href="summer-showcase-visualising-rail-disruption">About</a>
</div>
<div class="blog-box">
<a class="story-link" href="summer-showcase-visualising-rail-disruption-background">Background</a>
</div>
<div class="blog-box">
<a class="story-link" href="summer-showcase-visualising-rail-disruption-about-the-data">About the data</a>
</div>
<div class="blog-box-opacity">
<a class="story-link" href="summer-showcase-visualising-rail-disruption-methodology">Methodology</a>
</div>
<div class="blog-box">
<a class="story-link" href="summer-showcase-visualising-rail-disruption-collaboration">Collaboration</a>
</div>
<div class="blog-box">
<a class="story-link" href="summer-showcase-visualising-rail-disruption-what-next">What next?</a>
</div>
</div>
</div>
</article>
</div>
</div>
</div>
</div>
<footer class="site-footer">
<div class="container">
<div class="row">
<div class="col-md-8 footer-content">
<h1 class="footer-logo"><a href="http://oldsite.theodi.org">Open Data Institute</a></h1>
<p><a href="contact">Open Data Institute, 65 Clifton Street, London EC2A 4JE</a></p>
<p><a href="cdn-cgi/l/email-protection#c8a1a6aea788bca0ada7aca1e6a7baaf"><span class="__cf_email__" data-cfemail="6801060e07281c000d070c0146071a0f">[email&#160;protected]</span></a> Company <a href="http://opencorporates.com/companies/gb/08030289">08030289</a>
<span>VAT</span><span>143 7796 80</span>
</p>
<p class="license">
<a href="http://creativecommons.org/licenses/by-sa/2.0/uk/deed.en_GB" rel="license">
<img alt="Creative Commons Licence" height="15" src="assets/cc-a23fe95f04508432c8d97c00b0a36254.png" width="80">
</a>
</p>
</div>
<div class="col-md-4 footer-nav">
<nav><ul class="pull-right list-inline">
<li><a href="http://www.twitter.com/ODIHQ" class=" ">
<img alt="Follow us on Twitter" src="assets/twitter-a658ecc9fe2aab3308a5fb36adfb9a64.png" title="Follow us on Twitter"></a></li>
<li><a href="https://soundcloud.com/theodi" class=" ">
<img alt="Listen on Soundcloud" src="assets/soundcloud-3932b3db23c6fb6c45bce20c8016462c.png" title="Listen on Soundcloud"></a></li>
<li><a href="http://www.scribd.com/OpenDataInstitute" class=" ">
<img alt="Read on Scribd" src="assets/scribd-8afadecb87771fd6f6814e6ea81fb23d.png" title="Read on Scribd"></a></li>
<li><a href="https://github.com/orgs/theodi" class=" ">
<img alt="Follow us on Github" src="assets/github-914931d2a14f54f3c64caec5c6e68017.png" title="Follow us on Github"></a></li>
<li><a href="http://vimeo.com/theodiuk" class=" ">
<img alt="Watch on Vimeo" src="assets/vimeo-a865234771edd239032629b694ddaa32.png" title="Watch on Vimeo"></a></li>
<li><a href="http://www.youtube.com/user/OpenDataInstituteUK" class=" ">
<img alt="Watch on Youtube" src="assets/youtube-cccfa6f837a0acfe0d2fd9492b0d45b3.png" title="Watch on Youtube"></a></li>
<li><a href="http://www.flickr.com/photos/ukodi/" class=" ">
<img alt="Follow us on Flickr" src="assets/flickr-c81d78a530d046663cfff44293f6f775.png" title="Follow us on Flickr"></a></li>
</ul></nav>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<nav><ul class="pull-right list-inline">
<li class=" "><a href="terms-of-use" class=" ">Terms of use</a></li>
<li class=" "><a href="privacy-policy" class=" ">Privacy policy</a></li>
<li class=" "><a href="cookie-policy" class=" ">Cookie policy</a></li>
</ul></nav>
</div>
</div>
</div>
</footer>
<script data-cfasync="false" src="cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>

  var _pt = ["E6AF1363-3E19-409A-983C-91FFE62C2CBB"];
  (function(d,t){
    var a=d.createElement(t),s=d.getElementsByTagName(t)[0];a.src=location.protocol+'//a1webstrategy.com/track.js';s.parentNode.insertBefore(a,s);
  }(document,'script'));

  </script>
<script type="text/javascript">
      (function (n) {
          var u = window.location.href;
          var p = u.split("/")[0];
          var t = n.createElement("script"), i;
          t.type = "text/javascript";
          t.async = !0;
          t.src = p + "//dashboard.whoisvisiting.com/who.js";
          i = n.getElementsByTagName("script")[0];
          i.parentNode.insertBefore(t, i)
      })(document);

          var whoparam = whoparam || [];
          whoparam.push(["AcNo", "8d5d04b9adc94a34bc385c6f3370594e"]);
          whoparam.push(["SendHit", ""]
      );
  </script>
<script src="assets/application-4829863ea093de33ae55c9a127d6af6b.js" type="text/javascript"></script>

<!--[if gt IE 7]><!-->
<script src="assets/bootstrap/bootstrap-collapse-c4cb45620c1346753e2385c125ed4bdd.js" type="text/javascript"></script>
<!--<![endif]-->


<!--[if gt IE 7]><!-->
<script src="assets/masonry-c617ee0c7d6c602b548ab5e69d50f4fa.js" type="text/javascript"></script>
<script src="assets/infinitescroll-243a7a50c0c843f1deb394ea98f4d0a6.js" type="text/javascript"></script>
<script src="assets/background-check-677e6100d9ce594cd30a88f57fc49b48.js" type="text/javascript"></script>
<!--<![endif]-->
</body>
</html>
